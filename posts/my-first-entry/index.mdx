---
slug: my-first-entry
title: Avoid Nesting in Tests
date: '2019-07-22'
description: This is my first entry, created to confirm everything works perfectly
author: Misael Taveras
banner: ./media/banner.jpg
bannerCredit:
  Photo by [Geran de Klerk](https://unsplash.com/photos/bKhETeDV1WM) on
  [Unsplash](https://unsplash.com)
---

Why nested describe blocks in tests lead to confusing tests and how to avoid it.

I want to show you something. What I'm going to show is a general testing principle, applied to a React Component test. So even though the example is a react one, hopefully it helps communicate the concept properly.

Here's a React component that I want to test:

```php
<?php $b = 10  ?>// Want to try this out
```

## Over-abstraction
I feel like the utilities like changeUsernameInput and clickSubmit can be nice, but the tests are simple enough that duplicating that code instead could simplify our test code a bit. It's just that the abstraction of the function doesn't really give us a whole lot of benefit for this small set of tests, and we incur the cost for maintainers to have to look around the file for where those functions are defined.

## Nesting
The tests above are written with Jest APIs, but you'll find similar APIs in all major JavaScript frameworks. I'm talking specifically about describe which is used for grouping tests, beforeEach for common setup/actions, and it for the actual assertions.

I have a strong dislike for nesting like this. I've written and maintained thousands of tests that were written like this and I can tell you that as painful as it is for these three simple tests, it's way worse when you have thousands of lines of tests and wind up nesting even further.

![Some good looking GIF](https://media.giphy.com/media/h8HmN0UcEKR0xWnv3R/giphy.gif)

What makes it so complex? Take this bit for example:

<SourceButtons
  demoURL="https://google.com"
  repoURL="https://google.com"
></SourceButtons>
